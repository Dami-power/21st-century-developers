{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\usuario\\\\Desktop\\\\21st-century-developers\\\\Frontend\\\\src\\\\layouts\\\\PrivateLayaut.jsx\",\n    _s = $RefreshSig$();\n\nimport Footer from \"../components/Footer\";\nimport Navbar from \"../components/Navbar\";\nimport React, { useEffect, useState } from 'react';\nimport PrivateRoute from \"../components/PrivateRoute\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport ReactLoading from 'react-loading';\nimport { obtenerDatosUsuario } from '../utils/apis/Usuarios';\nimport { useUser } from '../context/userContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PrivateLayaut = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const {\n    isAuthenticated,\n    isLoading,\n    loginWithRedirect,\n    getAccessTokenSilently,\n    logout\n  } = useAuth0();\n  const [loadingUserInformation, setLoadingUserInformation] = useState(false);\n  const {\n    setUserData\n  } = useUser();\n  useEffect(() => {\n    const fetchAuth0Token = async () => {\n      // 1.\n      setLoadingUserInformation(true);\n      const accessToken = await getAccessTokenSilently({\n        audience: `api-autenticacion`\n      }); // 2.\n\n      localStorage.setItem('token', accessToken);\n      console.log(accessToken); // 3. \n\n      await obtenerDatosUsuario(response => {\n        console.log('response con datos del usuario', response);\n        setUserData(response.data);\n        setLoadingUserInformation(false);\n      }, err => {\n        console.log('err', err);\n        setLoadingUserInformation(false);\n        logout({\n          returnTo: 'http://localhost:3000/admin'\n        });\n      });\n    };\n\n    if (isAuthenticated) {\n      fetchAuth0Token();\n    }\n  }, [isAuthenticated, getAccessTokenSilently, logout, setUserData]);\n  if (isLoading || loadingUserInformation) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-center items-center h-screen\",\n    children: /*#__PURE__*/_jsxDEV(ReactLoading, {\n      className: \"\",\n      type: \"spinningBubbles\",\n      color: \"#231942\",\n      height: 400,\n      width: 250\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 7\n  }, this);\n\n  if (!isAuthenticated) {\n    return loginWithRedirect();\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex w-auto h-auto\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col w-full\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"flex w-full h-full items-center justify-center\",\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PrivateLayaut, \"Koaa4cGmISNRRs2xU0YpuTPmrVQ=\", false, function () {\n  return [useAuth0, useUser];\n});\n\n_c = PrivateLayaut;\nexport default PrivateLayaut; //     const { user, isAuthenticated, isLoading, getAccessTokenSilently  } = useAuth0();\n//     return (\n//         <PrivateRoute>\n//         <div className=\"flex flex-col justify-between h-screen\">\n//         <Navbar/>   \n//             <main className=\"h-full overflow-y-scroll\">{children}</main>\n//             <Footer/>\n//         </div>\n//         </PrivateRoute>\n//     );\n// };\n// export default PrivateLayaut;\n\nvar _c;\n\n$RefreshReg$(_c, \"PrivateLayaut\");","map":{"version":3,"sources":["C:/Users/usuario/Desktop/21st-century-developers/Frontend/src/layouts/PrivateLayaut.jsx"],"names":["Footer","Navbar","React","useEffect","useState","PrivateRoute","useAuth0","ReactLoading","obtenerDatosUsuario","useUser","PrivateLayaut","children","isAuthenticated","isLoading","loginWithRedirect","getAccessTokenSilently","logout","loadingUserInformation","setLoadingUserInformation","setUserData","fetchAuth0Token","accessToken","audience","localStorage","setItem","console","log","response","data","err","returnTo"],"mappings":"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","sourcesContent":["import Footer from \"../components/Footer\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport React, { useEffect, useState } from 'react';\r\nimport PrivateRoute from \"../components/PrivateRoute\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport ReactLoading from 'react-loading';\r\nimport { obtenerDatosUsuario } from '../utils/apis/Usuarios';\r\nimport { useUser } from '../context/userContext';\r\n\r\n\r\n\r\nconst PrivateLayaut = ({ children }) => {\r\n  const { isAuthenticated, isLoading, loginWithRedirect, getAccessTokenSilently, logout } =\r\n    useAuth0();\r\n  const [loadingUserInformation, setLoadingUserInformation] = useState(false);\r\n  const { setUserData } = useUser();\r\n\r\n  useEffect(() => {\r\n    const fetchAuth0Token = async () => {\r\n\r\n\r\n      // 1.\r\n      setLoadingUserInformation(true);\r\n      const accessToken = await getAccessTokenSilently({\r\n        audience: `api-autenticacion`,\r\n      });\r\n      // 2.\r\n      localStorage.setItem('token', accessToken);\r\n      console.log(accessToken);\r\n      // 3. \r\n      await obtenerDatosUsuario(\r\n        (response) => {\r\n          console.log('response con datos del usuario', response);\r\n          setUserData(response.data);\r\n          setLoadingUserInformation(false);\r\n        },\r\n        (err) => {\r\n          console.log('err', err);\r\n          setLoadingUserInformation(false);\r\n          logout({ returnTo: 'http://localhost:3000/admin' });\r\n        }\r\n      );\r\n    };\r\n    if (isAuthenticated) {\r\n      fetchAuth0Token();\r\n    }\r\n  }, [isAuthenticated, getAccessTokenSilently, logout, setUserData]);\r\n\r\n  if (isLoading || loadingUserInformation)\r\n    return (\r\n      <div className=\"flex justify-center items-center h-screen\">\r\n        <ReactLoading className=\"\" type='spinningBubbles' color='#231942' height={400} width={250} />\r\n      </div>\r\n    );\r\n\r\n\r\n  if (!isAuthenticated) {\r\n    return loginWithRedirect();\r\n  }\r\n  return (\r\n    <div className='flex w-auto h-auto'>\r\n      <div className='flex flex-col w-full'>\r\n        <Navbar />\r\n        {/* <SidebarResponsive /> */}\r\n        <main className='flex w-full h-full items-center justify-center'>\r\n          {children}\r\n        </main>\r\n        <Footer/>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PrivateLayaut;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//     const { user, isAuthenticated, isLoading, getAccessTokenSilently  } = useAuth0();\r\n//     return (\r\n//         <PrivateRoute>\r\n//         <div className=\"flex flex-col justify-between h-screen\">\r\n//         <Navbar/>   \r\n//             <main className=\"h-full overflow-y-scroll\">{children}</main>\r\n//             <Footer/>\r\n//         </div>\r\n//         </PrivateRoute>\r\n//     );\r\n// };\r\n\r\n// export default PrivateLayaut;"]},"metadata":{},"sourceType":"module"}